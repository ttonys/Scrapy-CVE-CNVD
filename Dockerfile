FROM python:3.8.8
WORKDIR /root/vuls

COPY requirements.txt /root/vuls
COPY run.sh /root/vuls
COPY OnePiece/ /root/vuls/OnePiece
COPY scrapy.cfg /root/vuls
ADD crontabfile /etc/cron.d/scrapy-cron

RUN apt-get update && apt-get -y install cron && apt-get -y install vim
RUN touch /var/log/cron.log
RUN cd /root/vuls \
    && chmod 755 run.sh \
    && pip install -r requirements.txt

RUN crontab /etc/cron.d/scrapy-cron
CMD cron && tail -f /var/log/cron.log